<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Complete Journey User Guide • completejourney</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Complete Journey User Guide">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">completejourney</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>

    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/completejourney.html">User Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>

    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>

    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bradleyboehmke/completejourney" class="external-link">
    <span class="fa fa-github fa-lg"></span>

    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Complete Journey User Guide</h1>
                        <h4 data-toc-skip class="author">Brad
Boehmke</h4>
            
            <h4 data-toc-skip class="date">2025-11-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bradleyboehmke/completejourney/blob/HEAD/vignettes/completejourney.Rmd" class="external-link"><code>vignettes/completejourney.Rmd</code></a></small>
      <div class="hidden name"><code>completejourney.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="the-complete-journey">The Complete Journey<a class="anchor" aria-label="anchor" href="#the-complete-journey"></a>
</h2>
<p><strong>completejourney</strong> provides access to data sets
characterizing household level transactions over one year from a group
of 2,469 households who are frequent shoppers at a grocery store. It
contains all of each household’s purchases, not just those from a
limited number of categories. For certain households, demographic
information as well as direct marketing contact history are
captured.</p>
<p>Due to the number of tables and the overall complexity of The
Complete Journey, it is suggested that this database be used in more
advanced classroom settings. Further, The Complete Journey would be
ideal for academic research as it should enable one to study the effects
of direct marketing to customers.</p>
<p>The following are examples of questions that could be submitted to
students or considered for academic research:</p>
<ul>
<li>How many customers are spending more over time? Less over time?
Describe these customers.</li>
<li>Of those customers who are spending more over time, which categories
are growing at a faster rate?</li>
<li>Of those customers who are spending less over time, with which
categories are they becoming less engaged?</li>
<li>Which demographic factors (e.g. household size, presence of
children, income) appear to affect customer spend? Engagement with
certain categories?</li>
<li>Is there evidence to suggest that direct marketing improves overall
engagement?</li>
</ul>
</div>
<div class="section level2">
<h2 id="accessing-the-data">Accessing the Data<a class="anchor" aria-label="anchor" href="#accessing-the-data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bradleyboehmke/completejourney" class="external-link">completejourney</a></span><span class="op">)</span></span></code></pre></div>
<p>There are eight built-in data sets available in this package (see
<code>data(package = 'completejourney')</code>. The data sets
include:</p>
<ul>
<li>
<code>campaigns</code>: campaigns received by each household</li>
<li>
<code>campaign_descriptions</code>: campaign metadata (length of
time active)</li>
<li>
<code>coupons</code>: coupon metadata (UPC code, campaign,
etc.)</li>
<li>
<code>coupon_redemptions</code>: coupon redemptions (household, day,
UPC code, campaign)</li>
<li>
<code>demographics</code>: household demographic data (age, income,
family size, etc.)</li>
<li>
<code>products</code>: product metadata (brand, description,
etc.)</li>
<li>
<code>promotions_sample</code>: a sampling of the product placement
in mailers and in stores corresponding to advertising campaigns</li>
<li>
<code>transactions_sample</code>: a sampling of the products
purchased by households</li>
</ul>
<p>Due to the size of the transactions and promotions data, the package
provides a sampling of the data built-in with
<code>transactions_sample</code> and <code>promotions_sample</code>.
However, you can access the full promotions and transactions data sets
from the source GitHub repository with the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the full transactions data set</span></span>
<span><span class="va">transactions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_transactions.html">get_transactions</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">transactions</span></span>
<span><span class="co">## # A tibble: 1,469,307 x 11</span></span>
<span><span class="co">##    household_id store_id basket_id product_id quantity sales_value retail_disc</span></span>
<span><span class="co">##    &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">##  1 900          330      31198570… 1095275           1        0.5        0    </span></span>
<span><span class="co">##  2 900          330      31198570… 9878513           1        0.99       0.1  </span></span>
<span><span class="co">##  3 1228         406      31198655… 1041453           1        1.43       0.15 </span></span>
<span><span class="co">##  4 906          319      31198705… 1020156           1        1.5        0.290</span></span>
<span><span class="co">##  5 906          319      31198705… 1053875           2        2.78       0.8  </span></span>
<span><span class="co">##  6 906          319      31198705… 1060312           1        5.49       0.5  </span></span>
<span><span class="co">##  7 906          319      31198705… 1075313           1        1.5        0.290</span></span>
<span><span class="co">##  8 1058         381      31198676… 985893            1        1.88       0.21 </span></span>
<span><span class="co">##  9 1058         381      31198676… 988791            1        1.5        1.29 </span></span>
<span><span class="co">## 10 1058         381      31198676… 9297106           1        2.69       0    </span></span>
<span><span class="co">## # … with 1,469,297 more rows, and 4 more variables: coupon_disc &lt;dbl&gt;,</span></span>
<span><span class="co">## #   coupon_match_disc &lt;dbl&gt;, week &lt;int&gt;, transaction_timestamp &lt;dttm&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the full promotions data set</span></span>
<span><span class="va">promotions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_promotions.html">get_promotions</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">promotions</span></span>
<span><span class="co">## # A tibble: 20,940,529 x 5</span></span>
<span><span class="co">##    product_id store_id display_location mailer_location  week</span></span>
<span><span class="co">##    &lt;chr&gt;      &lt;chr&gt;    &lt;fct&gt;            &lt;fct&gt;           &lt;int&gt;</span></span>
<span><span class="co">##  1 1000050    316      9                0                   1</span></span>
<span><span class="co">##  2 1000050    337      3                0                   1</span></span>
<span><span class="co">##  3 1000050    441      5                0                   1</span></span>
<span><span class="co">##  4 1000092    292      0                A                   1</span></span>
<span><span class="co">##  5 1000092    293      0                A                   1</span></span>
<span><span class="co">##  6 1000092    295      0                A                   1</span></span>
<span><span class="co">##  7 1000092    298      0                A                   1</span></span>
<span><span class="co">##  8 1000092    299      0                A                   1</span></span>
<span><span class="co">##  9 1000092    304      0                A                   1</span></span>
<span><span class="co">## 10 1000092    306      0                A                   1</span></span>
<span><span class="co">## # … with 20,940,519 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a convenience function to get both</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">promotions</span>, <span class="va">transactions</span><span class="op">)</span> <span class="op"><a href="../reference/multi-assign.html">%&lt;-%</a></span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>which <span class="op">=</span> <span class="st">'both'</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">promotions</span><span class="op">)</span></span>
<span><span class="co">## [1] 20940529        5</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">transactions</span><span class="op">)</span></span>
<span><span class="co">## [1] 1469307      11</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="dataset-details">Dataset Details<a class="anchor" aria-label="anchor" href="#dataset-details"></a>
</h2>
<p><img src="data_relationships.png" class="r-plt" width="95%" height="95%"></p>
<div class="section level3">
<h3 id="demographics">
<code>demographics</code><a class="anchor" aria-label="anchor" href="#demographics"></a>
</h3>
<p>This table contains demographic information for a portion of
households. Due to nature of the data, the demographic information is
not available for all households.</p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>household_id</code></td>
<td>Uniquely identifies each household</td>
</tr>
<tr class="even">
<td><code>age</code></td>
<td>Estimated age range</td>
</tr>
<tr class="odd">
<td><code>income</code></td>
<td>Household income</td>
</tr>
<tr class="even">
<td><code>home_ownership</code></td>
<td>Homeowner, renter, etc.</td>
</tr>
<tr class="odd">
<td><code>marital_status</code></td>
<td>Marital status (Married, Single, Unknown)</td>
</tr>
<tr class="even">
<td><code>household_size</code></td>
<td>Size of household up to 5+</td>
</tr>
<tr class="odd">
<td><code>household_comp</code></td>
<td>Household composition</td>
</tr>
<tr class="even">
<td><code>kid_count</code></td>
<td>Number of children present up to 3+</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="transactions">
<code>transactions</code><a class="anchor" aria-label="anchor" href="#transactions"></a>
</h3>
<p>Contains transaction-level product purchases by households (what you
would normally see on a receipt). Use a sample of all transactions
(<code>transactions_sample</code>) or get the entire data set with
<code><a href="../reference/get_transactions.html">get_transactions()</a></code>.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>household_id</code></td>
<td>Uniquely identifies each household</td>
</tr>
<tr class="even">
<td><code>store_id</code></td>
<td>Uniquely identifies each store</td>
</tr>
<tr class="odd">
<td><code>basket_id</code></td>
<td>Uniquely identifies each purchase occasion</td>
</tr>
<tr class="even">
<td><code>product_id</code></td>
<td>Uniquely identifies each product</td>
</tr>
<tr class="odd">
<td><code>quantity</code></td>
<td>Number of the product purchased during the trip</td>
</tr>
<tr class="even">
<td><code>sales_value</code></td>
<td>Amount of dollars the retailer receives from sale</td>
</tr>
<tr class="odd">
<td><code>retail_disc</code></td>
<td>Discount applied due to the retailer’s loyalty card program</td>
</tr>
<tr class="even">
<td><code>coupon_disc</code></td>
<td>Discount applied due to a manufacturer coupon</td>
</tr>
<tr class="odd">
<td><code>coupon_match_disc</code></td>
<td>Discount applied due to retailer’s match of manufacturer coupon</td>
</tr>
<tr class="even">
<td><code>week</code></td>
<td>Week of the transaction; Ranges 1-53</td>
</tr>
<tr class="odd">
<td><code>transaction_timestamp</code></td>
<td>Date and time of day when the transaction occurred</td>
</tr>
</tbody>
</table>
<p>The variable <code>sales_value</code> in this table is the amount of
dollars received by the retailer on the sale of the specific product,
taking the coupon match and loyalty card discount into account. It is
not the actual price paid by the customer. If a customer uses a coupon,
the actual price paid will be less than the <code>sales_value</code>
because the manufacturer issuing the coupon will reimburse the retailer
for the amount of the coupon.</p>
<p>To calculate the actual product prices, use the formulas below:</p>
<ul>
<li>Loyalty card price = (sales_value – (retail_disc +
coupon_match_disc)) / quantity</li>
<li>Non-loyalty card price = (sales_value – (coupon_match_disc)) /
quantity</li>
</ul>
<p>The example below demonstrates how to calculate the actual shelf
price of the product:</p>
<ul>
<li>Line 1 – When this product was purchased the
<code>retail_disc</code> and <code>coupon_disc</code> were both zero,
meaning the price of the product is the same as the amount received by
the retailer.</li>
<li>Line 2 – Two items of this product were purchased, and there was a
retail discount applied due to a loyalty card. To determine the regular
shelf price of the product (exclusive of loyalty card discount) we take
the sum of the amount paid and the discount, then divide it by the
quantity
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>$</mi><mn>3.34</mn><mo>+</mo><mi>$</mi><mn>0.36</mn><mo stretchy="false" form="postfix">)</mo><mo>÷</mo><mn>2</mn><mo>=</mo><mi>$</mi><mn>1.85</mn></mrow><annotation encoding="application/x-tex">\$3.34 + \$0.36) \div 2 = \$1.85</annotation></semantics></math>.
The shelf price of the product including loyalty card discount is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>$</mi><mn>3.34</mn><mo>÷</mo><mn>2</mn><mo>=</mo><mi>$</mi><mn>1.67</mn></mrow><annotation encoding="application/x-tex">\$3.34 \div 2 = \$1.67</annotation></semantics></math>.
In this case, the customer paid $3.34 for both of these products, which
is the same amount the retailer received.</li>
<li>Line 3 – The actual shelf price of each product here is
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>$</mi><mn>2.89</mn><mo>+</mo><mi>$</mi><mn>0.45</mn><mo stretchy="false" form="postfix">)</mo><mo>÷</mo><mn>2</mn><mo>=</mo><mi>$</mi><mn>1.67</mn></mrow><annotation encoding="application/x-tex">\$2.89 + \$0.45) \div 2 = \$1.67</annotation></semantics></math>.
In this case, the customer paid $2.34
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>$</mi><mn>2.89</mn><mo>−</mo><mi>$</mi><mn>0.55</mn></mrow><annotation encoding="application/x-tex">\$2.89 - \$0.55</annotation></semantics></math>)
for these products, but the retailer will receive $2.89 due to
reimbursement of the manufacturer discount.</li>
</ul>
</div>
<div class="section level3">
<h3 id="campaigns">
<code>campaigns</code><a class="anchor" aria-label="anchor" href="#campaigns"></a>
</h3>
<p>Contains identifying information for the marketing campaigns each
households participated in.</p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>campaign_id</code></td>
<td>Uniquely identifies each campaign; Ranges 1-27</td>
</tr>
<tr class="even">
<td><code>household_id</code></td>
<td>Uniquely identifies each household</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="campaign_descriptions">
<code>campaign_descriptions</code><a class="anchor" aria-label="anchor" href="#campaign_descriptions"></a>
</h3>
<p>Contains campaign metatdata, specifically the time a campaign was
active.</p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>campaign_id</code></td>
<td>Uniquely identifies each campaign; Ranges 1-27</td>
</tr>
<tr class="even">
<td><code>campaign_type</code></td>
<td>Type of campaign (Type A, Type B, Type C)</td>
</tr>
<tr class="odd">
<td><code>start_date</code></td>
<td>Start date of campaign</td>
</tr>
<tr class="even">
<td><code>end_date</code></td>
<td>End date of campaign</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="products">
<code>products</code><a class="anchor" aria-label="anchor" href="#products"></a>
</h3>
<p>Contains metatdata regarding the products purchased (brand,
description, etc.).</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>product_id</code></td>
<td>Uniquely identifies each product</td>
</tr>
<tr class="even">
<td><code>manufacturer_id</code></td>
<td>Uniquely identifies each manufacturer</td>
</tr>
<tr class="odd">
<td><code>department</code></td>
<td>Groups similar products together</td>
</tr>
<tr class="even">
<td><code>brand</code></td>
<td>Indicates private or national label brand</td>
</tr>
<tr class="odd">
<td><code>product_category</code></td>
<td>Groups similar products together at lower level</td>
</tr>
<tr class="even">
<td><code>product_type</code></td>
<td>Groups similar products together at lowest level</td>
</tr>
<tr class="odd">
<td><code>package_size</code></td>
<td>Indicates package size (not available for all products)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="coupons">
<code>coupons</code><a class="anchor" aria-label="anchor" href="#coupons"></a>
</h3>
<p>This table lists all the coupons sent to customers as part of a
campaign, as well as the products for which each coupon is redeemable.
Some coupons are redeemable for multiple products. One example is a
coupon for any private label frozen vegetable. There are a large number
of products where this coupon could be redeemed.</p>
<p>For campaign TypeA, this table provides the pool of possible coupons.
Each customer participating in a Type A campaign received 16 coupons out
of the pool. The 16 coupons were selected based on the customer’s prior
purchase behavior. Identifying the specific 16 coupons that each
customer received is outside the scope of this database.</p>
<p>For campaign Type B and Type C, all customers participating in a
campaign receives all coupons pertaining to that campaign.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>coupon_upc</code></td>
<td>Uniquely identifies each coupon (unique to household and
campaign)</td>
</tr>
<tr class="even">
<td><code>product_id</code></td>
<td>Uniquely identifies each product</td>
</tr>
<tr class="odd">
<td><code>campaign_id</code></td>
<td>Uniquely identifies each campaign</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="coupon_redemptions">
<code>coupon_redemptions</code><a class="anchor" aria-label="anchor" href="#coupon_redemptions"></a>
</h3>
<p>Contains individual coupon redemptions (household, day, UPC code,
campaign) that can be used to measure campaign efficacy and coupon usage
on specific products.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>household_id</code></td>
<td>Uniquely identifies each household</td>
</tr>
<tr class="even">
<td><code>coupon_upc</code></td>
<td>Uniquely identifies each coupon (unique to household and
campaign)</td>
</tr>
<tr class="odd">
<td><code>campaign_id</code></td>
<td>Uniquely identifies each campaign</td>
</tr>
<tr class="even">
<td><code>redemption_date</code></td>
<td>Date when the coupon was redeemed</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="promotions">
<code>promotions</code><a class="anchor" aria-label="anchor" href="#promotions"></a>
</h3>
<p>Contains product placement information (e.g. mailer page placement
and in-store display placement) corresponding to campaigns. Use a sample
of all promotions (<code>promotions_sample</code>) or get the entire
data set with <code><a href="../reference/get_promotions.html">get_promotions()</a></code>.</p>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>product_id</code></td>
<td>Uniquely identifies each product</td>
</tr>
<tr class="even">
<td><code>store_id</code></td>
<td>Uniquely identifies each store</td>
</tr>
<tr class="odd">
<td><code>display_location</code></td>
<td>Display location (0-no display, 1-store front, 2-store rear, 3-front
end cap, 4-mid-aisle end cap, 5-rear end cap, 6-side aisle end cap,
7-in-aisle, 9-secondary location display, A-in-shelf)</td>
</tr>
<tr class="even">
<td><code>mailer_location</code></td>
<td>Mailer location (0-not on ad, A-interior page feature, C-interior
page line item, D-front page feature, F-back page feature, H-wrap front
feature, J-wrap interior coupon, L-wrap back feature, P-interior page
coupon, X-free on interior page, Z-free on front page, back page, or
wrap)</td>
</tr>
<tr class="odd">
<td><code>week</code></td>
<td>Week of the transaction; Ranges 1-53</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="example-case-study">Example Case Study<a class="anchor" aria-label="anchor" href="#example-case-study"></a>
</h2>
<p>John Smith is a valued customer at a national grocery retailer for
which we have detailed transaction data. Throughout all the tables in
the database, he is identified with a <code>household_id</code> of
“208”.</p>
<p>To learn a little about John, we can obtain his demographic
information by looking at the record in the <code>demographics</code>
table where <code>household_id = "208"</code>. The table below shows the
information we receive, and tells us that he is a homeowner, who makes
between $50,000 and $74,000 a year and is between 45 and 54 years
old.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demographics</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 1 x 8</span></span>
<span><span class="co">##   household_id age   income home_ownership marital_status household_size household_comp</span></span>
<span><span class="co">##   &lt;chr&gt;        &lt;ord&gt; &lt;ord&gt;  &lt;ord&gt;          &lt;ord&gt;          &lt;ord&gt;          &lt;ord&gt;         </span></span>
<span><span class="co">## 1 208          45-54 50-74K Homeowner      NA             2              2 Adults No K…</span></span>
<span><span class="co">## # … with 1 more variable: kids_count &lt;ord&gt;</span></span></code></pre></div>
<p>If we look at John’s records from <code>campaigns</code>, we can see
that he received 7 different campaigns.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">campaigns</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 7 x 2</span></span>
<span><span class="co">##   campaign_id household_id</span></span>
<span><span class="co">##   &lt;chr&gt;       &lt;chr&gt;       </span></span>
<span><span class="co">## 1 13          208         </span></span>
<span><span class="co">## 2 17          208         </span></span>
<span><span class="co">## 3 18          208         </span></span>
<span><span class="co">## 4 22          208         </span></span>
<span><span class="co">## 5 26          208         </span></span>
<span><span class="co">## 6 27          208         </span></span>
<span><span class="co">## 7 8           208</span></span></code></pre></div>
<p>These campaigns were spread out over the one year period of the
study. To understand the time periods and types of these campaigns, you
can join with the <code>campaign_descriptions</code> data. In this
example, we see the type of campaign along with the start and end dates
of the campaign.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">campaigns</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">campaign_descriptions</span>, by<span class="op">=</span><span class="st">"campaign_id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">start_date</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 7 x 5</span></span>
<span><span class="co">##   campaign_id household_id campaign_type start_date end_date  </span></span>
<span><span class="co">##   &lt;chr&gt;       &lt;chr&gt;        &lt;ord&gt;         &lt;date&gt;     &lt;date&gt;    </span></span>
<span><span class="co">## 1 26          208          Type B        2016-12-28 2017-02-19</span></span>
<span><span class="co">## 2 27          208          Type A        2017-02-08 2017-03-26</span></span>
<span><span class="co">## 3 8           208          Type A        2017-05-08 2017-06-25</span></span>
<span><span class="co">## 4 13          208          Type A        2017-08-08 2017-09-24</span></span>
<span><span class="co">## 5 17          208          Type B        2017-10-18 2017-11-19</span></span>
<span><span class="co">## 6 18          208          Type A        2017-10-30 2017-12-24</span></span>
<span><span class="co">## 7 22          208          Type B        2017-12-06 2018-01-07</span></span></code></pre></div>
<p>Let us take a closer look at campaign 18 When we look at all the
distinct coupon_upc’s from the coupon table where
<code>campaign_id = "18"</code>, we see that there were 209 distinct
coupons sent out as part of that campaign.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coupons</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">campaign_id</span> <span class="op">==</span> <span class="st">"18"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">coupon_upc</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 209 x 1</span></span>
<span><span class="co">##    coupon_upc </span></span>
<span><span class="co">##    &lt;chr&gt;      </span></span>
<span><span class="co">##  1 10000085475</span></span>
<span><span class="co">##  2 10000085476</span></span>
<span><span class="co">##  3 10000085477</span></span>
<span><span class="co">##  4 10000085478</span></span>
<span><span class="co">##  5 10000085479</span></span>
<span><span class="co">##  6 10000085480</span></span>
<span><span class="co">##  7 10000085484</span></span>
<span><span class="co">##  8 10000089237</span></span>
<span><span class="co">##  9 10000089238</span></span>
<span><span class="co">## 10 10000089239</span></span>
<span><span class="co">## # … with 199 more rows</span></span></code></pre></div>
<p>Let us take an even deeper look at one of the specific coupons
offered as part of the campaign. If we print out all records from the
coupon table where <code>campaign_id = "18"</code> and
<code>coupon_upc = "55410000076"</code>, we see that this coupon could
actually be redeemed for a number of products.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coupons</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">campaign_id</span> <span class="op">==</span> <span class="st">"18"</span>, </span>
<span>         <span class="va">coupon_upc</span> <span class="op">==</span> <span class="st">"55410000076"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 50 x 3</span></span>
<span><span class="co">##    coupon_upc  product_id campaign_id</span></span>
<span><span class="co">##    &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      </span></span>
<span><span class="co">##  1 55410000076 1004458    18         </span></span>
<span><span class="co">##  2 55410000076 1011841    18         </span></span>
<span><span class="co">##  3 55410000076 1016495    18         </span></span>
<span><span class="co">##  4 55410000076 10182852   18         </span></span>
<span><span class="co">##  5 55410000076 1018696    18         </span></span>
<span><span class="co">##  6 55410000076 1058591    18         </span></span>
<span><span class="co">##  7 55410000076 1065032    18         </span></span>
<span><span class="co">##  8 55410000076 1069973    18         </span></span>
<span><span class="co">##  9 55410000076 107157     18         </span></span>
<span><span class="co">## 10 55410000076 1110721    18         </span></span>
<span><span class="co">## # … with 40 more rows</span></span></code></pre></div>
<p>Although all the products are not displayed above, we find that this
coupon is actually valid on 50 distinct products. If we go to the
product table and print out all records for the
<code>product_id</code>’s above (“1004458”, “1011841”, etc.), we see
that this coupon is valid for pickles from a national brand.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coupons</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">campaign_id</span> <span class="op">==</span> <span class="st">"18"</span>, </span>
<span>         <span class="va">coupon_upc</span> <span class="op">==</span> <span class="st">"55410000076"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">products</span>, by<span class="op">=</span><span class="st">"product_id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">product_id</span>, <span class="va">manufacturer_id</span>, <span class="va">department</span>, <span class="va">brand</span>, </span>
<span>         <span class="va">product_category</span>, <span class="va">product_type</span>, <span class="va">package_size</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 50 x 7</span></span>
<span><span class="co">##    product_id manufacturer_id department brand product_category product_type</span></span>
<span><span class="co">##    &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;      &lt;fct&gt; &lt;chr&gt;            &lt;chr&gt;       </span></span>
<span><span class="co">##  1 1004458    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  2 1011841    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  3 1016495    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLD VEG …</span></span>
<span><span class="co">##  4 10182852   1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  5 1018696    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  6 1058591    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  7 1065032    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  8 1069973    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">##  9 107157     1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">## 10 1110721    1318            GROCERY    Nati… PICKLE/RELISH/P… PICKLES     </span></span>
<span><span class="co">## # … with 40 more rows, and 1 more variable: package_size &lt;chr&gt;</span></span></code></pre></div>
<p>As we’ve seen, John received a number of campaigns over the past year
that contained many coupons. Chances are, he did not redeem every coupon
he received. So, let us take a look to see what coupons he did redeem.
To do this, we need to view all records from the
<code>coupon_redemptions</code> table where
<code>household_id = "208"</code>. This shows us that he redeemed five
coupons from two of the campaigns (“8” and “18”).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coupon_redemptions</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 5 x 4</span></span>
<span><span class="co">##   household_id coupon_upc  campaign_id redemption_date</span></span>
<span><span class="co">##   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;       &lt;date&gt;         </span></span>
<span><span class="co">## 1 208          55100090033 8           2017-05-23     </span></span>
<span><span class="co">## 2 208          51800015050 18          2017-11-09     </span></span>
<span><span class="co">## 3 208          51920021576 18          2017-11-09     </span></span>
<span><span class="co">## 4 208          55410000076 18          2017-11-13     </span></span>
<span><span class="co">## 5 208          10000085475 18          2017-11-18 </span></span></code></pre></div>
<p>John’s coupon redemptions are only part of the overall picture of his
purchasing behavior. If we look at the records from the transaction_data
table where <code>household_id = "208"</code>, we can view everything
that John purchased.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transactions</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 756 x 11</span></span>
<span><span class="co">##    household_id store_id basket_id product_id quantity sales_value retail_disc</span></span>
<span><span class="co">##    &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">##  1 208          327      31268866… 845379            1        7.64        0   </span></span>
<span><span class="co">##  2 208          327      31268866… 854133            1        4.69        0.5 </span></span>
<span><span class="co">##  3 208          327      31268866… 862349            1        1           0.99</span></span>
<span><span class="co">##  4 208          327      31268866… 879504            1        2           1.19</span></span>
<span><span class="co">##  5 208          327      31268866… 990519            1        1.69        0   </span></span>
<span><span class="co">##  6 208          327      31268866… 1068830           1        1.09        0   </span></span>
<span><span class="co">##  7 208          327      31268866… 1097635           1        2.96        0   </span></span>
<span><span class="co">##  8 208          324      31344175… 883932            1        2           0.59</span></span>
<span><span class="co">##  9 208          324      31344175… 885290            1        1.99        0   </span></span>
<span><span class="co">## 10 208          324      31344175… 915502            2        4           2.78</span></span>
<span><span class="co">## # … with 746 more rows, and 4 more variables: coupon_disc &lt;dbl&gt;,</span></span>
<span><span class="co">## #   coupon_match_disc &lt;dbl&gt;, week &lt;int&gt;, transaction_timestamp &lt;dttm&gt;</span></span></code></pre></div>
<p>This gets a bit complicated, but we can combine the transaction data
with the other tables to understand John’s behavior when he was
redeeming a coupon (and when he wasn’t redeeming a coupon).</p>
<ul>
<li>John received offers as part of campaign 18, which occurred between
10/30/2017 and 12/24/2017</li>
<li>We know he redeemed <code>coupon_upc = "55410000076"</code> on day
11/13/2017</li>
<li>Through the coupon table, we know that the coupon is actually valid
for a number of products, including
<code>product_id = "896292"</code>
</li>
<li>From the table below, we can see where John purchased this item and
received a $1 discount from using the coupon.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transactions</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">household_id</span> <span class="op">==</span> <span class="st">"208"</span>, </span>
<span>         <span class="va">product_id</span> <span class="op">==</span> <span class="st">"896292"</span>,</span>
<span>         <span class="fu">as_date</span><span class="op">(</span><span class="va">transaction_timestamp</span><span class="op">)</span> <span class="op">==</span> <span class="st">"2017-11-13"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 1 x 11</span></span>
<span><span class="co">##   household_id store_id basket_id product_id quantity sales_value retail_disc</span></span>
<span><span class="co">##   &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">## 1 208          327      40715247… 896292            2           4        2.58</span></span>
<span><span class="co">## # … with 4 more variables: coupon_disc &lt;dbl&gt;, coupon_match_disc &lt;dbl&gt;, week &lt;int&gt;,</span></span>
<span><span class="co">## #   transaction_timestamp &lt;dttm&gt;</span></span></code></pre></div>
<p>Knowing when John redeemed a coupon can help us learn a lot about
him, and how the receipt of certain campaigns affected his behavior.
Does the receipt of campaigns cause him to purchase more items than he
did previously? Is John more likely to redeem coupons for products he
already purchases, or does it entice him to try products he has never
purchased before?</p>
<p>There is one bit of information we have not talked about yet – what
is happening in the rest of the store? Is it possible that John
purchased the item above because of other events occurring in the store
in addition to his coupon?</p>
<p>We obviously do not know a customer’s reason for purchasing an item,
but we do know whether an item was featured during the time of the
purchase. If we view all records from the <code>promotions</code> table
where <code>product_id = "896292"</code>, we see the weeks and stores
where this product was featured in the weekly mailer and whether it was
featured as part of an in-store display. If we look at the first line,
we can tell that in store 327 and week 47, the product was on the shelf
(i.e.  <code>display_location="A"</code>) so it was not part of a
special display. We can assume this was not an impulse buy because of a
display or advertisement. He most likely went to the store with the
coupon intent upon purchasing the item.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">promotions</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">product_id</span> <span class="op">==</span> <span class="st">"896292"</span>, </span>
<span>         <span class="va">store_id</span> <span class="op">==</span> <span class="st">"327"</span><span class="op">)</span></span>
<span><span class="co">## # A tibble: 2 x 5</span></span>
<span><span class="co">##   product_id store_id display_location mailer_location  week</span></span>
<span><span class="co">##   &lt;chr&gt;      &lt;chr&gt;    &lt;fct&gt;            &lt;fct&gt;           &lt;int&gt;</span></span>
<span><span class="co">## 1 896292     327      A                0                  47</span></span>
<span><span class="co">## 2 896292     327      A                0                  49</span></span></code></pre></div>
<p>We hope that this quick look at John Smith’s behavior provides
clarity around The Complete Journey database, and inspires your own
investigation into the purchasing behavior of these customers.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Brad Boehmke, Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
